{% extends "base.html" %}
{% block content %}
<style>
  @media (max-width: 991.98px) {
    .home-mobile-hero {
      border: 1px solid #dbe6f4;
      border-radius: 18px;
      padding: 0.9rem;
      background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 58%, #2563eb 100%);
      color: #fff;
      box-shadow: 0 12px 24px rgba(30, 58, 138, 0.2);
      margin-bottom: 0.9rem;
    }
    .home-mobile-hero .odoo-title {
      font-size: 1.2rem;
      color: #fff;
      margin-top: 0 !important;
    }
    .home-mobile-hero .odoo-subtitle {
      color: rgba(255, 255, 255, 0.86);
      margin-top: 0.15rem !important;
    }
    .home-mobile-hero .btn {
      border-radius: 12px;
      font-weight: 700;
    }
    .home-mobile-kpis {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.55rem;
      margin-bottom: 0.75rem;
    }
    .home-mobile-kpi {
      background: #fff;
      border: 1px solid #dbe6f4;
      border-radius: 14px;
      padding: 0.5rem 0.55rem;
      box-shadow: 0 3px 10px rgba(15, 23, 42, 0.06);
    }
    .home-mobile-kpi .label {
      font-size: 0.66rem;
      letter-spacing: 0.09em;
      text-transform: uppercase;
      color: #5b6981;
      margin-bottom: 0.15rem;
    }
    .home-mobile-kpi .value {
      font-size: 0.9rem;
      font-weight: 700;
      color: #102a43;
    }
    .home-mobile-quick {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }
    .home-mobile-quick .btn {
      min-height: 44px;
      font-weight: 700;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.35rem;
    }
  }
</style>
<div id="layout" class="min-h-screen grid lg:grid-cols-[260px_1fr] bg-surface">
  {% include "partials/sidebar.html" %}

  <main class="p-4 sm:p-6 lg:p-8 text-[18px]">
    {% set has_perms = request.state.has_permissions if request and request.state else false %}
    {% set perms = request.state.permission_names if has_perms else [] %}
    <div class="odoo-page">
      <div class="odoo-header">
        <div class="home-mobile-hero d-lg-none">
          <div class="d-flex align-items-center justify-content-between gap-2">
            <div>
              <div class="odoo-title">Centro de operaciones</div>
              <div class="odoo-subtitle">ERP Hollywood Pacas</div>
            </div>
            <button class="btn btn-light btn-sm" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
              <i class="bi bi-list"></i>
              Menu
            </button>
          </div>
        </div>
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 position-relative">
          <div>
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb mb-1">
                <li class="breadcrumb-item">Panel</li>
                <li class="breadcrumb-item active" aria-current="page">Home</li>
              </ol>
            </nav>
            <div class="odoo-title mt-2">Centro de operaciones</div>
            <div class="odoo-subtitle mt-1">Gestion integral para ventas, inventario y finanzas.</div>
          </div>
          <div class="d-flex d-lg-none align-items-center gap-2 w-100">
            <button class="btn btn-outline-secondary btn-sm" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
              <i class="bi bi-list"></i>
              Menu
            </button>
            <span class="text-slate text-sm">Accesos rapidos</span>
          </div>
          <div class="odoo-toolbar d-none d-lg-flex flex-column flex-sm-row gap-2 w-100 w-lg-auto">
            <a class="btn btn-primary btn-sm shadow-sm d-inline-flex align-items-center gap-2" href="/inventory">
              <i class="bi bi-box-seam"></i>
              Catalogo de productos
            </a>
            {% if not has_perms or 'menu.sales.preventas.mobile' in perms or 'menu.sales.preventas' in perms %}
            <a class="btn btn-outline-primary btn-sm shadow-sm d-inline-flex align-items-center gap-2" href="/m/preventas">
              <i class="bi bi-phone"></i>
              Nueva preventa movil
            </a>
            {% endif %}
            <a class="btn btn-outline-secondary btn-sm shadow-sm d-inline-flex align-items-center gap-2" href="/inventory/ingresos">
              <i class="bi bi-box-arrow-in-down"></i>
              Ingresos de inventario
            </a>
            <a class="btn btn-outline-secondary btn-sm shadow-sm d-inline-flex align-items-center gap-2" href="/inventory/egresos">
              <i class="bi bi-box-arrow-up"></i>
              Egresos de inventario
            </a>
          </div>
        </div>
        <div class="overflow-x-auto mt-3">
          <ul class="nav nav-tabs flex-nowrap">
          <li class="nav-item">
            <a class="nav-link active" href="/home">Panel</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/sales/ventas-caliente">Ventas en Caliente</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/reports">Informes</a>
          </li>
          </ul>
        </div>
      </div>

      <div class="odoo-kpis">
        <div class="odoo-kpi">
          <div class="text-[11px] uppercase tracking-[0.2em] text-slate inline-flex items-center gap-2">
            <i class="bi bi-activity text-blue-600"></i>
            Estado operativo
          </div>
          <strong>Estable</strong>
        </div>
        <div class="odoo-kpi">
          <div class="text-[11px] uppercase tracking-[0.2em] text-slate inline-flex items-center gap-2">
            <i class="bi bi-geo-alt text-emerald-600"></i>
            Sucursal activa
          </div>
          <strong>Central</strong>
        </div>
        <div class="odoo-kpi">
          <div class="text-[11px] uppercase tracking-[0.2em] text-slate inline-flex items-center gap-2">
            <i class="bi bi-shield-check text-violet-600"></i>
            Seguridad
          </div>
          <strong>Control total</strong>
        </div>
        <div class="odoo-kpi">
          <div class="text-[11px] uppercase tracking-[0.2em] text-slate inline-flex items-center gap-2">
            <i class="bi bi-graph-up-arrow text-rose-600"></i>
            Operaciones
          </div>
          <strong>En linea</strong>
        </div>
      </div>
      <div class="home-mobile-kpis d-lg-none">
        <div class="home-mobile-kpi">
          <div class="label">Estado</div>
          <div class="value">Estable</div>
        </div>
        <div class="home-mobile-kpi">
          <div class="label">Sucursal</div>
          <div class="value">Central</div>
        </div>
        <div class="home-mobile-kpi">
          <div class="label">Seguridad</div>
          <div class="value">Control total</div>
        </div>
        <div class="home-mobile-kpi">
          <div class="label">Operaciones</div>
          <div class="value">En linea</div>
        </div>
      </div>

      <div class="odoo-card">
        <div class="d-flex flex-wrap align-items-center justify-content-between gap-3 mb-3">
          <div class="odoo-section-title">Modulos principales</div>
          <span class="odoo-pill primary">
            <i class="bi bi-grid-3x3-gap"></i>
            Accesos rapidos
          </span>
        </div>
        <div class="home-mobile-quick d-lg-none">
          <button class="btn btn-outline-secondary btn-sm" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
            <i class="bi bi-layout-sidebar-inset"></i>
            Ver modulos
          </button>
          {% if not has_perms or 'menu.sales.preventas.mobile' in perms or 'menu.sales.preventas' in perms %}
          <a class="btn btn-primary btn-sm" href="/m/preventas">
            <i class="bi bi-phone"></i>
            Nueva preventa
          </a>
          {% endif %}
        </div>
        <div class="row g-4">
          <div class="col-md-6 col-xl-4">
            <a class="text-decoration-none" href="/sales/ventas-caliente">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Ventas en Caliente</div>
                  <span class="odoo-pill primary">
                    <i class="bi bi-fire"></i>
                    Reporte
                  </span>
                </div>
                <p class="text-slate mt-2">Totales por sucursal y tendencia del mes actual.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4">
            <a class="text-decoration-none" href="/inventory/caliente">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Inventario en Caliente</div>
                  <span class="odoo-pill primary">
                    <i class="bi bi-lightning-charge"></i>
                    Stock
                  </span>
                </div>
                <p class="text-slate mt-2">Existencias en tiempo real por bodega.</p>
              </div>
            </a>
          </div>
          {% if not has_perms or 'menu.sales.preventas.mobile' in perms or 'menu.sales.preventas' in perms %}
          <div class="col-md-6 col-xl-4">
            <a class="text-decoration-none" href="/m/preventas">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Preventa movil</div>
                  <span class="odoo-pill primary">
                    <i class="bi bi-journal-richtext"></i>
                    Ventas
                  </span>
                </div>
                <p class="text-slate mt-2">Crear y enviar preventas desde telefono, con cliente y validacion de inventario.</p>
              </div>
            </a>
          </div>
          {% endif %}
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <a class="text-decoration-none" href="/reports">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Informes</div>
                  <span class="odoo-pill primary">
                    <i class="bi bi-bar-chart"></i>
                    Analisis
                  </span>
                </div>
                <p class="text-slate mt-2">Reportes detallados con filtros por fechas y sucursales.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <a class="text-decoration-none" href="/inventory">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Inventarios</div>
                  <span class="odoo-pill success">
                    <i class="bi bi-box-seam"></i>
                    Activo
                  </span>
                </div>
                <p class="text-slate mt-2">Catalogo, costos, movimientos y existencias.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <a class="text-decoration-none" href="/inventory/ingresos">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Ingresos</div>
                  <span class="odoo-pill primary">
                    <i class="bi bi-box-arrow-in-down"></i>
                    Flujo
                  </span>
                </div>
                <p class="text-slate mt-2">Compras locales, importaciones y ajustes.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <a class="text-decoration-none" href="/inventory/egresos">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Egresos</div>
                  <span class="odoo-pill">
                    <i class="bi bi-box-arrow-up"></i>
                    Salidas
                  </span>
                </div>
                <p class="text-slate mt-2">Bajas por ajustes, mermas y devoluciones.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <a class="text-decoration-none" href="/finance">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Finanzas</div>
                  <span class="odoo-pill">
                    <i class="bi bi-cash-stack"></i>
                    Control
                  </span>
                </div>
                <p class="text-slate mt-2">Tasas, conversiones y flujo financiero.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
              <div class="d-flex align-items-center justify-content-between">
                <div class="odoo-section-title">Contabilidad</div>
                <span class="odoo-pill">
                  <i class="bi bi-journal-text"></i>
                  Proximo
                </span>
              </div>
              <p class="text-slate mt-2">Libros contables y conciliaciones.</p>
            </div>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <a class="text-decoration-none" href="/data">
              <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="odoo-section-title">Datos maestros</div>
                  <span class="odoo-pill">
                    <i class="bi bi-cpu"></i>
                    Admin
                  </span>
                </div>
                <p class="text-slate mt-2">Usuarios, roles, bancos, formas de pago y catalogos.</p>
              </div>
            </a>
          </div>
          <div class="col-md-6 col-xl-4 d-none d-lg-block">
            <div class="border border-slate-200 rounded-3xl p-4 h-100 shadow-sm bg-white">
              <div class="d-flex align-items-center justify-content-between">
                <div class="odoo-section-title">Ecommerce</div>
                <span class="odoo-pill">
                  <i class="bi bi-globe2"></i>
                  Proximo
                </span>
              </div>
              <p class="text-slate mt-2">Ventas online y catalogo digital.</p>
            </div>
          </div>
        </div>
      </div>

      <div class="text-end text-slate text-sm mt-4">Version {{ version }}</div>
    </div>
  </main>
</div>
{% endblock %}
